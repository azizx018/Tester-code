<!DOCTYPE html>
<html>
<head>
    <title>Chiara's Project</title>
    <style>
        body {
            background-color:rgb(100, 211, 248);
            padding: 10px;
        }
        label {
            display:block;
            margin-bottom: 10px;
            padding: 2px;
        }
        input {
            display: block;
            width: 180px;
        }
        button {
            background-color:rgb(247, 221, 135);
            padding: 8px; 
            border-radius:5px;
            border:midnightblue, thin;
        }
        h5 {
            color:red;
            display: inline;
        }
    </style>
</head>
<body>

<div>
    <form onsubmit="validate(event)">
        <label>
            UserID:
            <input type="text" id ="uid" name="uid" required minlength="8" maxlength="12">
            <h5 id="invalid-userid"></h5>
        </label>
        
        <label>
            First Name:
            <input type="text" id= "fname" name="fname">
            <h5 id="missing-fname"></h5>
        </label>
        
        <label>
            Last Name:
            <input type="text" id="lname" name="lname">
            <h5 id="missing-lname"></h5>
        </label>
        
        <label>
            Birthday:
            <input type="date" id="birthday" name="birthday" placeholder="mm/dd/yyyy">
            <h5 id="missing-birthday"></h5>
        </label>
        <button>Accept</button>
    </form>
</div>
<div id="chart">
    
</div>
<div>
    <p id="results"></p>
    <p id="age"></p>
</div>

<script>
       
    let _daysAlive = 0
    const ageDiv = document.getElementById("age")
    

    function validate(event) {
        event.preventDefault()
        ageDiv.innerHTML = ''
        verifyUserID()
        _daysAlive = dateDiff()
        printResults()
        verifyInfo()
    }

    function verifyUserID() {
        let hasNumber = false
        let hasUpperCase = false
        let hasLowerCase = false

        const uid = document.getElementById("uid").value
        for(let x of uid) {
            if (!isNaN(x)) {
                hasNumber = true 
            }
            else if (x === x.toUpperCase()) {
                hasUpperCase = true
            } 
            else if (x === x.toLowerCase()) {
                hasLowerCase = true
            }
        }
        if (hasNumber === false || hasLowerCase === false || hasUpperCase === false){
            document.getElementById("invalid-userid").innerHTML = "Invalid UserID!"
        }
        
    }
    function verifyInfo() {
        const fname = document.getElementById("fname").value
        const lname = document.getElementById("lname").value
        const birthday = document.getElementById("birthday").value
        if (fname === '') {
            document.getElementById("missing-fname").innerHTML = "Invalid fname!"
        }
        if (lname === ''){
            document.getElementById("missing-lname").innerHTML = "Invalid lname!"
        }
        if (birthday === '') {
            document.getElementById("missing-birthday").innerHTML = "Invalid birthday!"
        } 
    }
    function dateDiff() {
        const today = new Date()
        const birthday = document.getElementById("birthday").value
        const dateParts = birthday.split("-")
        const birthdate = new Date(parseInt(dateParts[0], 10),
                                  parseInt(dateParts[1], 10) - 1,
                                  parseInt(dateParts[2], 10))
        const millisecondsInDay = 1000 * 60 * 60 * 24
        const daysAlive = (Math.round((today-birthdate)/millisecondsInDay))
        return daysAlive
    }
    function printResults() {
        const fname = document.getElementById("fname").value
        const lname = document.getElementById("lname").value        
        document.getElementById("results").innerHTML =
            `${fname} ${lname}, you have been breathing for ${_daysAlive} days!`
        if (_daysAlive < (365*18)){
            ageDiv.innerHTML = "You are probably not old enough to take this class!"
        }   
    }
    let str = ""
    for (let i = 0; i < 21; i++){
        str = str.padStart(i,"x")
        console.log(str)
        document.write(str.padStart(i,"x") + "<br>")
    }
    
    // and validate inputs here using if statements
    // and document.getElementById().innerHTML to display results
    // write your JS functions here
    // write your JS Loop For here to print the Xs
    // use something like document.write(str.padStart(i,"x") + "<br>");
        
</script>

</body>
</html>